name: 'Auto Release Changelog'
description: 'Automatically create GitHub releases with changelog generated from conventional commits'
author: 'Bifras'
branding:
  icon: 'git-commit'
  color: 'blue'

inputs:
  github-token:
    description: 'GitHub token with permissions to create releases and tags'
    required: true
  release-type:
    description: 'Release type: major, minor, patch, none'
    required: false
    default: 'patch'
  changelog-path:
    description: 'Path to CHANGELOG.md file'
    required: false
    default: 'CHANGELOG.md'
  backend-url:
    description: 'Backend SaaS URL for reporting (optional)'
    required: false
  api-key:
    description: 'API key for backend authentication (optional)'
    required: false
  fail-on-backend-error:
    description: 'Fail action if backend returns error (default: false)'
    required: false
    default: 'false'

outputs:
  release-url:
    description: 'URL of the created release (if created)'
  version:
    description: 'Calculated version (if release-type != none)'
  tag:
    description: 'Created tag (if release created)'

runs:
  using: 'node16'
  main: 'dist/index.js'


